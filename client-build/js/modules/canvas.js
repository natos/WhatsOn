define(["config/app","modules/app","modules/router"],function(a,b,c){function d(){a._transition.className="background",a._content.appendChild(a._transition)}function e(){a._transition.className="background hide",setTimeout(function(){a._transition.parentNode&&a._transition.parentNode.removeChild(a._transition)},500)}function f(a){if(!a){console.log("loadController","State object is empty, can't load a controller without information.");return}v=a;var b=y[a.controller];if(typeof b=="undefined"){console.log("loadController",a.controller," doesn't exists, go an get it, lazy loading."),h("controllers/"+a.controller);return}if(typeof b[w]!="function"){console.log("Canvas Module",b.name+" doesn't have a 'initialize' method available.");return}g(b)}function g(a){a[w](v)}function h(a){require([a],function(a){y[a.name]=a,g(a)})}function i(a){if(!a){console.log("unloadController","State object is empty, must be the first load.");return}j(y[a.controller])}function j(a){if(typeof a[x]!="function"){console.log("Canvas Module",a.name+" can't be finalized, 'finalize' method is not a function.");return}a[x]()}function k(a){if(typeof a=="undefined"){console.log("Canvas Module","State object is empty. Stop navigation.");return}if(a===v){console.log("Canvas Module",a.name+" controller already loaded.");return}if(a.controller==="grid"&&!b.allowGrid()){c.navigate({},"","/dashboard");return}i(v),f(a),o()}function l(a,b){switch(a){case"TOGGLE-MENU":m()}}function m(){/open/.test(t.className)?o():n(),console.log(u.className)}function n(){t.className="open",u.className="nav active"}function o(){t.className="",u.className="nav"}function p(){return b.on(a.NAVIGATE,k),b.on(a.NAVIGATE,d),b.on(a.VIEW_RENDERED,e),b.on(a.ACTION,l),b.can3DTransformPositionFixed()||(document.documentElement.className+=" css-no-3d-transform-position-fixed"),this}function q(){return b.off(a.NAVIGATE,k),b.off(a.NAVIGATE,d),b.off(a.VIEW_RENDERED,e),b.off(a.ACTION,manageActions),this}var r="canvas",s=Array.prototype.shift,t=a._doc.getElementById("main"),u=a._doc.getElementsByTagName("nav")[0],v=!1,w="initialize",x="finalize",y={};return{name:r,controllers:y,initialize:p,finalize:q}})