define(["utils/dom"],function(a){function b(a){var b,c=["transform","WebkitTransform","msTransform","MozTransform","OTransform"];while(b=c.shift())if(typeof a.style[b]!="undefined")return b;return!1}function c(){r.style.height=window.innerWidth*.5625+"px"}function d(a){a.stopPropagation(),e(a.target)}function e(b){var c,d,e,f,h;if(/disc/.test(b.className)){h=a.getDataset(b),g(r).to(h.index*-1);for(f=0;f<p.children.length;f++)p.children[f].className=l;b.className=b.className+m,s.restart()}}function f(){o?(s.stop(),this.getElementsByTagName("i")[0].className="icon-play"):(s.start(),this.getElementsByTagName("i")[0].className="icon-pause"),o=!o}function g(a){function b(b){a.style[n]=d+"("+100*b+(c?"%)":"%, 0, 0)")}var c,d;return c=n==="OTransform",d=c?"translateX":"translate3d",{to:b}}function h(){return window.addEventListener("resize",c),window.addEventListener("orientationchange",c),this}function i(){q=document.getElementById("featured");if(q.className==="no-carousel"){q.className="carousel",r=q.getElementsByTagName("ul")[0],r.className="show slide",n=b(r);var e,h=0,i,j,k,o=q.getElementsByTagName("li"),t=a.create("i"),u=a.create("div"),v=a.create("i");p=a.create("div"),t.className="icon-pause",u.id="playpause",u.appendChild(t),u.addEventListener("click",f),v.className=l,p.className="navigator";for(h;h<o.length;h++)k=o[h],g(k).to(h),i=k.getElementsByTagName("img")[0],e=a.getDataset(i),e.src&&(i.src=e.src),j=v.cloneNode(!0),j.setAttribute("data-index",h),p.appendChild(j);p.firstChild.className=l+m,q.appendChild(p),q.appendChild(u)}return p.addEventListener("click",d),c(),s.start(),this}function j(){return s.stop(),p&&p.removeEventListener("click",s.restart),window.removeEventListener("resize",c),window.removeEventListener("orientationchange",c),this}var k="carousel",l="disc icon-certificate",m=" selected",n,o=!0,p,q,r,s={clock:void 0,time:5e3,status:!1,start:function(){s.status=!0,s.clock=setTimeout(s.tick,s.time)},tick:function(){if(!s.status)return;var a,b=0;for(b=0;b<p.children.length;b++)/selected/.test(p.children[b].className)&&(a=p.children[b]);if(!a)return;a.nextSibling?e(a.nextSibling):e(p.firstChild)},restart:function(){s.stop(),s.start()},stop:function(){s.status=!1,s.clock=clearTimeout(s.clock)}};return{name:k,initialize:h,finalize:j,render:i}})