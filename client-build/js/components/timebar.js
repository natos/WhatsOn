define(["config/app","config/grid","config/channel","modules/app","models/channel","utils/convert","utils/dom"],function(a,b,c,d,e,f,g){function h(){var c=f.timeToPixels((new Date).valueOf());return c=c-a._doc.body.clientWidth/2+b.CHANNEL_BAR_WIDTH,a._win.scroll(c,a._doc.body.scrollTop),this}function i(a){u&&(u.style.left=a.left+"px")}function j(a){if(typeof a=="undefined")return;a.position&&i(a.position)}function k(a){switch(a.target.name){case"channelSelector":if(!e[c.GROUPS][a.target.value]){console.log("The selected groun doesn't exist");return}e.set(c.SELECTED_GROUP,a.target.value);break;case"timeSelector":console.log(a.target.id),h()}}function l(){t.className=t.className===""?"expanded":""}function m(a){a==="TOGGLE-EDIT-MODE"&&l()}function n(){return $(".upc-logo").on("click",h),d.on(b.MODEL_CHANGED,j),d.on(a.ACTION,m),this}function o(){t.innerHTML=s.innerHTML,t.id="time-bar",t.appendChild(v),v.addEventListener("change",k);var a=b.zeroTime,c="",d=["Zo","Ma","Di","Wo","Do","Vr","Za"],e;for(var f=0;f<24;f++)e=new Date(a.valueOf()+f*60*60*1e3),c+="<li><span>"+("0"+e.getHours()).slice(-2)+":00</span></li>";return r.appendChild(t),u=document.getElementById("time-bar-list"),u.innerHTML=c,h(),this}function p(){return $(".upc-logo").off("click",h),d.off(b.MODEL_CHANGED,j),d.off(a.ACTION,m),r.removeChild(t),this}var q="timebar",r=document.getElementById("main"),s=document.getElementById("timebar-template"),t=g.create("div"),u,v=g.create("div"),w=document.getElementById("timecontrols-template");return v.id="time-controls",v.innerHTML=w.innerHTML,{name:q,initialize:n,finalize:p,render:o,centerViewPort:h}})