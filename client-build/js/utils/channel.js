define(["config/channel","models/channel","modules/app"],function(a,b,c){function d(c){var d={},f={},g,h,i,j,k,l,m=c.length;d["000"]=[],d["001"]=[];for(j=0;j<m;j++){h=c[j],f[h.id]=h,f[h.id].logo=e(h),d["000"].push(h),delete h._type,delete h.apiChannelGroupId,delete h.broadcastFormat,delete h.logoIMG,delete h.position,k=h.domains.length;while(k--){i=h.domains[k],l=i.groups.length;while(l--)g=i.groups[l],d[g]||(d[g]=[]),d[g].push(h)}}return b.set(a.BY_ID,f),b.set(a.GROUPS,d),b.set(a.SELECTED_GROUP,a.DEFAULT_GROUP),c}function e(a){if(!a.links)return;var b=!1,c=a.links.length;while(c--)a.links[c].rel==="logo"&&(foundit=a.links[c]);return foundit}function f(a){$.getJSON("/channels.json",function(b,e,f){a&&a.apply(c,b),d(b)})}var g="channelutils";return{name:g,fetchAnd:f}})